### 01~04 : if - else - fi

예시는 /etc/passwd 파일에 유저 이름을 검색하고, /home/ 에 유저 디렉터리를 ls한다.

### 05 : if - elif - else - fi

예시는 /etc/passwd 파일에 유저 이름은 없으나, /home/ 에 유저 디렉터리가 남아있는 경우를 파악할 수 있다.

05에 대한 예시는 가끔 존재할 수도 있을 것 같다. useradd를 안하는 경우와, LDAP를 쓰는 경우에 발생할 수 있다고 한다.

https://superuser.com/questions/580148/users-not-found-in-etc-passwd

* 이와는 반대로, useradd 시 -b 옵션을 통해 새 유저의 디렉터리가 홈 디렉터리에 없는 경우도 생각할 수 있겠다. -m 옵션을 포함해야 useradd와 동시에 홈 디렉터리가 생성된다고 한다.
  * https://chonnom.com/bbs/board.php?bo_table=B19&wr_id=283

### 06~21 : test, [ ]

test는 다음의 경우를 테스트할 수 있다.

* 변수에 내용이 있는지 없는지 예) "" 는 종료 코드가 1이다.

* 숫자 비교

  * -eq, -gt, -le, -lt, -lt, -ne

* 문자열 비교

  test 안에서 문자열 비교를 위해서는 부등호 앞에 이스케이프 (\\) 해주어야 한다.

  문자열 비교 test 에서는 표준 ASCII 순서를 사용하며,

  sort는 시스템 로케일의 언어 설정에 정의된 정렬 순서를 사용한다.

  ASCII는 대문자가 더 작고, en 로케일은 소문자가 더 작다.

  비어있고 초기화되지 않은 변수는 쉘 스크립트 테스트에 치명적인 영향을 미칠 수 있다.

  변수의 내용이 확실하지 않으면 숫자 또는 문자열 비교를 사용하기 전에 -n 또는 -z를 사용하여 값을 포함하는지 테스트하는 것이 가장 좋다.

* 파일 비교

  -e 는 개체가 존재하는지 여부를 확인할 수 있다. -d, -o -S(소켓) 등으로 추가 확인이 필요하다.

  -nt 또는 -ot 비교를 하기 하기 전에, 파일이 존재하는지 부터 확인하는 것이 필수다. (360쪽)

**나의 결론 : bracket [ ] 안의 옵션이 어려울 때는 man test 를 확인하자.**

### 22 : 복합 test

[ ] && [ ] 또는, [ ] || [ ] 로 복합 test 비교를 할 수 있다.

&&로 **$HOME 디렉터리 존재 여부** && **$HOME 디렉터리에 파일이 쓰기권한이 있는지**를 확인한다. 

이 중 하나라도 실패하면 if 문은 실패하고 쉘은 else 섹션을 실행한다. 두 비교가 모두 성공하면 쉘은 then 섹션을 실행한다.

### 23 : 이중 괄호

이중 괄호 명령은 비교에 다른 프로그래밍 언어를 사용하고 있는 프로그래머가 익숙하게 사용할 수 있는 더 많은 수학 기호를 제공한다.

이중 괄호 안의 수식 안에서는 부등호에 이스케이프가 필요 없다. 이는 이중 괄호 명령이 가진 또 다른 고급 기능이다.

### 24 : 이중 대괄호

이중 대괄호 명령은 문자열 비교에 대한 고급 기능을 제공한다. 이중 대괄호 명령은 **test 평가에서 사용할 수 없는, 정규 표현식을 사용하여 패턴 일치 기능도 제공한다.**

스크립트에서 이중 등호 (==) 를 사용하는 것을 알 수 있다. 이러한 **이중 등호는 오른쪽에 있는 문자열을 패턴으로 간주하고 규칙을 적용해서 패턴을 대조한다.**

### 26 : case - ) - ;; - esac

wildcard(*)는 default 느낌

## 요약

구조적 명령은 쉘 스크립트 실행의 정상적인 흐름을 변경할 수 있다. 가장 기본이 되는 구조적 명령은 if-then 구문이다. 이 문장은 명령 평가를 제공하고 평가된 명령의 출력에 기반을 두고 다른 명령을 수행한다.

if-then 구문은 지정된 명령이 실패할 경우에 실행할 bash 쉘 실행 명령 세트를 포함할 수 있도록 확장된다. if-then-else 구문은 평가되는 명령이 0이 아닌 종료 상태 코드를 돌려줄 때에만 실행될 명령들을 지정할 수 있다.

또한 elif 문으로 if-then-else 구문을 연결할 수도 있다. elif는 원래 평가된 명령이 실패할 경우 추가 검사를 제공한다.

대부분의 스크립트에서는 명령을 평가하는 대신 숫자값, 문자열의 내용, 파일이나 디렉터리의 상태 같은 조건을 평가할 필요가 있을 것이다. 테스트 명령은 이러한 모든 조건을 평가하기 위한 쉬운 방법을 제공한다. 조건이 참이면 테스트 명령은 if-then 구문에 종료 상태 코드 0을 돌려준다. 조건이 거짓이면 테스트 명령은 if-then 구문에 0이 아닌 종료 상태 코드를 돌려준다.

대괄호는 특수한 bash 명령으로 test 명령과 같은 뜻이다. if-then 구문에서 숫자, 문자열 및 파일 상태를 테스트할 경우 테스트 조건을 대괄호로 묶을 수 있다.

이중 괄호 명령은 추가 연산자를 사용하는 고급 수학 평가를 제공한다.

이중 대괄호 명령은 고급 문자열 패턴 일치 평가를 수행할 수 있다.

마지막으로 이 장은 한 가지 변수에 대한 여러가지 값을 검사할 때 if-then-else 명령을 여러 번 사용하는 것보다, 스크립트를 짧게 만들 수 있는 case 명령에 대해 이야기했다.

다음 장에서는 쉘 루프 명령을 살펴보면서 구조적 명령에 대한 논의를 계속할 것이다. for 및 while 명령을 사용하면 지정된 기간 동안 명령을 되풀이하는 루프를 만들 수 있다.